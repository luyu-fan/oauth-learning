# OAuth 2.0

## 概要

### 什么是

OAuth 2.0 是一种行业标准的身份授权协议，本身也可以实现为一种授权框架，它能够使得第三方应用借助利用资源服务器提供的资源拥有者和资源之间的一系列授权交互动作，得到对应资源http服务的访问资格。

那么在具体的实际应用场景中则是，通过某一个授权中心，可以利用这个授权中心提供的身份信息完成其他应用（第三方）的身份验证从而达到服务的目的，而不需要额外的注册、密码提供等操作，整个过程都是比较安全的。除了应用在多个应用平台之间的身份授权之外，还可以广泛应用于系统内部各个子模块（例如微服务调用的上下游）的业务授权和身份验证。

### 为什么

使用Open Auth的原因就是因为传统的CS身份验证系统会存在较大的问题，客户端在向服务端请求服务的时候需要提供自己的身份验证信息去验证身份以访问受保护的资源，绝大多数都是通过密码验证的，也就是说用户的密码信息必须要和这些第三方及其客户端共享（第三方的概念是相对的，即应用之间可以互为第三方），这样就会有很多的潜在问题所在：

- 第三方应用必须保存用户的身份信息，从比较抽象的层面来看这一步是冗余的。
- 第三方应用必须同样实现身份验证逻辑，例如支持密码验证等。
- 在基于直接身份验证等情况下，第三方服务对用户受保护资源等访问是没有任何期限、权限等限制的。
- 传统情况下用户也无法单独撤回对某一个第三方应用的访问权限。而且大多数时候要修改密码完成。
- 第三方应用、保护数据此时已经显示地和用户提供身份信息耦合起来。

OAuth框架提供了一个授权层来解决上述问题，通过客户端向用户以及资源服务器发送请求（用户在资源服务器上完成授权动作）获得访问token达到第三方应用及客户端与用户之间的解耦。

### 怎么用


## 详细协议

在OAuth 2.0协议对应的[RFC文档 6749](https://datatracker.ietf.org/doc/html/rfc6749)中，主要会有以下几个主题：

### 核心部分

1. 协议中角色的定义

协议定义了四种角色：

- **资源拥有者(用户)**：能够进行对保护数据进行交互授权的实体，大多数情况下就是用户本身。

- **资源服务器**：保存了实体对应保护数据的地方，以及验证token完成对受保护资源的提供。

- **客户端**：代表了资源拥有者（代理）以及其授权的受保护资源请求发起方。可以是任何平台以及任何形式的需要请求受保护数据的应用。

- **授权服务器**： 提供用户授权交互过程服务以及在成功后对第三方客户端颁发token的服务。大多数情况下授权服务器和资源服务器是同一个。


2. 协议流

3. 授权

4. 访问TOKEN

5. TLS版本

6. HTTP重定向

7. 互操作性


### 第三方客户端的注册

### 协议的终端

### 获取授权认证

### 颁发访问token

### 刷新访问token

### 访问受保护资源

### 可扩展性

## 本地应用

### 安全性考虑
